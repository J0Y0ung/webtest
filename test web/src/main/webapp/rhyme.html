<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>R!DE OUT • 라임 추천</title>

<style>
:root {
  --bg:#000; --fg:#fff; --card:#0d0d0d; --accent:#8a7cff; --gray:#777;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;background:var(--bg);color:var(--fg);
  font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}

.app{
  width:100%;max-width:430px;height:100vh;margin:0 auto;
  display:flex;flex-direction:column;justify-content:space-between;
  background:var(--bg);border:1px solid #222;border-radius:30px;overflow:hidden;
  box-shadow:0 0 20px rgba(0,0,0,.8);
}

header{
  position:relative;display:flex;align-items:center;justify-content:center;
  padding:10px 18px;background:rgba(0,0,0,.7);backdrop-filter:blur(12px);
}
.logo{display:flex;align-items:center;gap:8px;font-weight:900;font-size:1.4rem;}
.login-box{position:absolute;right:18px;top:50%;transform:translateY(-50%);
  border:1px solid #555;border-radius:10px;padding:6px 16px;background:none;color:#fff;cursor:pointer;}
.login-box:hover{border-color:var(--accent);color:var(--accent);}

main{
  flex:1;display:flex;flex-direction:column;align-items:center;padding:25px 18px;gap:18px;overflow-y:auto;
}
.guide-text{
  color:var(--gray);font-size:0.8rem;text-align:center;line-height:1.3;
}
.search-box{
  width:100%;display:flex;align-items:center;gap:8px;
  background:rgba(255,255,255,0.05);border:1px solid #333;border-radius:12px;padding:10px 14px;
}
.search-box input{
  flex:1;background:none;border:none;outline:none;color:#fff;font-size:0.9rem;
}
.search-box button{
  background:var(--accent);border:none;border-radius:8px;color:#fff;padding:6px 10px;font-weight:600;cursor:pointer;
}
.results{
  display:flex;flex-direction:column;width:100%;gap:12px;margin-top:10px;
}
.rhyme-card{
  background:rgba(255,255,255,0.05);border-radius:12px;padding:14px;display:flex;flex-direction:column;gap:6px;
  font-size:0.95rem;
}
.feedback{
  display:flex;justify-content:center;gap:20px;margin-top:6px;
}
.feedback button{
  background:none;border:none;color:#fff;font-size:1.3rem;cursor:pointer;transition:0.2s;
}
.feedback button:hover{color:var(--accent);transform:scale(1.2);}

.saved-section{
  position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);
  display:none;flex-direction:column;align-items:center;overflow-y:auto;z-index:10;padding-top:80px;
}
.saved-header{
  position:fixed;top:0;left:0;width:100%;display:flex;justify-content:space-between;align-items:center;
  background:rgba(20,20,20,0.9);backdrop-filter:blur(10px);padding:14px 20px;border-bottom:1px solid #333;
}
.saved-header h2{font-size:1rem;}
.saved-header button{background:none;border:none;color:#fff;font-size:1.4rem;cursor:pointer;}
.saved-list{width:100%;display:flex;flex-direction:column;align-items:center;gap:14px;padding:20px;}
.saved-item{width:90%;background:#111;border-radius:10px;padding:12px;text-align:center;color:#fff;}

.saved-icons{
  position:absolute;top:12px;right:18px;display:flex;gap:10px;
}
.saved-icons button{
  background:none;border:none;color:#fff;font-size:1.4rem;cursor:pointer;transition:0.2s;
}
.saved-icons button:hover{color:var(--accent);transform:scale(1.2);}

/* 하단 홈 버튼 */
.tabbar-wrap{
  width:100%;background:rgba(20,20,20,0.6);backdrop-filter:blur(12px);
  padding:10px 0;display:flex;justify-content:center;align-items:center;border-top:1px solid rgba(255,255,255,0.1);
}
.home-btn{
  width:80px;height:40px;background:rgba(60,60,60,0.8);border:1px solid #555;border-radius:10px;
  cursor:pointer;transition:0.2s;
}
.home-btn:hover{background:rgba(120,120,120,0.8);border-color:var(--accent);}
</style>
</head>

<body>
<div class="app">
  <header>
    <div class="logo">✍️ 라임 추천</div>
    <button class="login-box">login</button>
  </header>

  <main>
    <p class="guide-text">하루에 한 번만 라임을 추천받을 수 있습니다.<br>원하는 주제나 단어를 입력해주세요!</p>

    <div class="search-box">
      <input type="text" id="rhymeInput" placeholder="ex) 사랑, 밤, 비, 고독 ..." />
      <button onclick="getRhyme()">추천 받기</button>
    </div>

    <div class="saved-icons">
      <button onclick="showSaved('like')">❤️</button>
      <button onclick="showSaved('hold')">🕓</button>
    </div>

    <div class="results" id="results"></div>
  </main>

  <!-- 홈으로 돌아가기 -->
  <div class="tabbar-wrap">
    <button class="home-btn" onclick="location.href='main.html'"></button>
  </div>
</div>

<!-- 저장된 라임 보기 -->
<div class="saved-section" id="savedSection">
  <div class="saved-header">
    <h2 id="savedTitle">저장된 라임</h2>
    <button onclick="closeSaved()">✖</button>
  </div>
  <div class="saved-list" id="savedList"></div>
</div>

<script>
let savedRhymes = { like: [], hold: [] };

function getRhyme(){
  const input = document.getElementById('rhymeInput').value.trim();
  const results = document.getElementById('results');
  const lastUse = localStorage.getItem('lastRhymeTime');
  const now = Date.now();

  // 하루에 1회 제한 (24시간)
  if(lastUse && now - lastUse < 86400000){
    results.innerHTML = '<p style="color:#777;text-align:center;">오늘은 이미 라임을 추천받았습니다. 내일 다시 시도해주세요.</p>';
    return;
  }

  if(!input){
    results.innerHTML = '<p style="color:#777;text-align:center;">단어나 주제를 입력해주세요.</p>';
    return;
  }

  localStorage.setItem('lastRhymeTime', now);
  results.innerHTML = '';

  const fakeRhymes = [
    `${input}의 끝을 잡고 흐르는 vibe`,
    `${input} 위에 내려앉은 rhyme`,
    `${input}처럼 반복되는 line`
  ];

  fakeRhymes.forEach((line, i) => {
    const div = document.createElement('div');
    div.className = 'rhyme-card';
    div.innerHTML = `
      <div>${line}</div>
      <div class="feedback">
        <button onclick="saveRhyme('like', '${line}')">❤️</button>
        <button onclick="saveRhyme('hold', '${line}')">🕓</button>
      </div>
    `;
    results.appendChild(div);
  });
}

function saveRhyme(type, text){
  if(!savedRhymes[type].includes(text)){
    savedRhymes[type].push(text);
  }
  alert(`${type === 'like' ? '좋아요' : '보류'}로 저장되었습니다!`);
}

function showSaved(type){
  const section = document.getElementById('savedSection');
  const list = document.getElementById('savedList');
  const title = document.getElementById('savedTitle');
  title.innerText = type === 'like' ? '좋아요한 라임' : '보류한 라임';
  list.innerHTML = '';
  savedRhymes[type].forEach(t => {
    const el = document.createElement('div');
    el.className = 'saved-item';
    el.textContent = t;
    list.appendChild(el);
  });
  section.style.display = 'flex';
}
function closeSaved(){
  document.getElementById('savedSection').style.display = 'none';
}
</script>
</body>
</html>
