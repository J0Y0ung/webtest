<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>R!DE OUT • 비트 추천</title>
<style>
:root {
  --bg:#000; --fg:#fff; --card:#0d0d0d; --accent:#8a7cff; --gray:#777;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;background:var(--bg);color:var(--fg);
  font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}
.app{
  width:100%;max-width:430px;height:100vh;margin:0 auto;
  display:flex;flex-direction:column;justify-content:space-between;
  background:var(--bg);border:1px solid #222;border-radius:30px;overflow:hidden;
  box-shadow:0 0 20px rgba(0,0,0,.8);
}
header{
  position:relative;display:flex;align-items:center;justify-content:center;
  padding:10px 18px;background:rgba(0,0,0,.7);backdrop-filter:blur(12px);
}
.logo{display:flex;align-items:center;gap:8px;font-weight:900;font-size:1.4rem;}
.login-box{position:absolute;right:18px;top:50%;transform:translateY(-50%);
  border:1px solid #555;border-radius:10px;padding:6px 16px;background:none;color:#fff;cursor:pointer;}
.login-box:hover{border-color:var(--accent);color:var(--accent);}
main{
  flex:1;display:flex;flex-direction:column;align-items:center;padding:25px 18px;gap:18px;overflow-y:auto;
}
.guide-text{
  color:var(--gray);font-size:0.8rem;text-align:center;line-height:1.3;
}
.search-box{
  width:100%;display:flex;align-items:center;gap:8px;
  background:rgba(255,255,255,0.05);border:1px solid #333;border-radius:12px;padding:10px 14px;
}
.search-box input{
  flex:1;background:none;border:none;outline:none;color:#fff;font-size:0.9rem;
}
.search-box button{
  background:var(--accent);border:none;border-radius:8px;color:#fff;padding:6px 10px;font-weight:600;cursor:pointer;
}
.results{
  display:flex;flex-direction:column;width:100%;gap:16px;margin-top:10px;
}
.video-card{
  background:rgba(255,255,255,0.05);border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:6px;
}
.video-frame{
  width:100%;height:180px;border:none;border-radius:10px;overflow:hidden;
}
.feedback{
  display:flex;justify-content:center;gap:20px;margin-top:6px;
}
.feedback button{
  background:none;border:none;color:#fff;font-size:1.4rem;cursor:pointer;transition:0.2s;
}
.feedback button:hover{color:var(--accent);transform:scale(1.2);}
.saved-section{
  position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);
  display:none;flex-direction:column;align-items:center;overflow-y:auto;z-index:10;padding-top:80px;
}
.saved-header{
  position:fixed;top:0;left:0;width:100%;display:flex;justify-content:space-between;align-items:center;
  background:rgba(20,20,20,0.9);backdrop-filter:blur(10px);padding:14px 20px;border-bottom:1px solid #333;
}
.saved-header h2{font-size:1rem;}
.saved-header button{background:none;border:none;color:#fff;font-size:1.4rem;cursor:pointer;}
.saved-list{width:100%;display:flex;flex-direction:column;align-items:center;gap:14px;padding:20px;}
.saved-video{width:90%;background:#111;border-radius:10px;padding:10px;}
.saved-icons{
  position:absolute;top:12px;right:18px;display:flex;gap:10px;
}
.saved-icons button{
  background:none;border:none;color:#fff;font-size:1.4rem;cursor:pointer;transition:0.2s;
}
.saved-icons button:hover{color:var(--accent);transform:scale(1.2);}
/* 하단 홈 버튼 */
.tabbar-wrap{
  width:100%;background:rgba(20,20,20,0.6);backdrop-filter:blur(12px);
  padding:10px 0;display:flex;justify-content:center;align-items:center;border-top:1px solid rgba(255,255,255,0.1);
}
.home-btn{
  display:block;width:80px;height:40px;background:rgba(60,60,60,0.8);border:1px solid #555;border-radius:10px;
  transition:0.2s;text-decoration:none;
}
.home-btn:hover{background:rgba(120,120,120,0.8);border-color:var(--accent);}
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="logo">🎧 비트 추천</div>
    <button class="login-box">login</button>
  </header>

  <main>
    <p class="guide-text">원하시는 비트의 분위기를 입력하세요.<br>자세히 입력할수록 정확도가 올라갑니다!</p>

    <div class="search-box">
      <input type="text" id="beatInput" placeholder="ex) 어두운 트랩, 감성 힙합, 여름 팝 스타일..." />
      <button onclick="searchBeats()">검색</button>
    </div>

    <div class="saved-icons">
      <button onclick="showSaved('like')">❤️</button>
      <button onclick="showSaved('hold')">🕓</button>
    </div>

    <div class="results" id="results"></div>
  </main>

  <!-- a태그로 홈 이동 -->
  <div class="tabbar-wrap">
    <a href="main.html" class="home-btn" aria-label="홈으로"></a>
  </div>
</div>

<!-- 저장된 비트 보기 -->
<div class="saved-section" id="savedSection">
  <div class="saved-header">
    <h2 id="savedTitle">저장된 비트</h2>
    <button onclick="closeSaved()">✖</button>
  </div>
  <div class="saved-list" id="savedList"></div>
</div>

<script>
let savedBeats = { like: [], hold: [] };

function searchBeats(){
  const query = document.getElementById('beatInput').value.trim();
  const results = document.getElementById('results');
  results.innerHTML = '';

  if(!query){
    results.innerHTML = '<p style="color:#777;text-align:center;">검색어를 입력해주세요.</p>';
    return;
  }

  const fakeResults = [
    { title: `${query} - 비트 1`, embed: 'https://www.youtube.com/embed/2Vv-BfVoq4g' },
    { title: `${query} - 비트 2`, embed: 'https://www.youtube.com/embed/LsoLEjrDogU' },
    { title: `${query} - 비트 3`, embed: 'https://www.youtube.com/embed/CevxZvSJLk8' }
  ];

  fakeResults.forEach((beat, idx) => {
    const div = document.createElement('div');
    div.className = 'video-card';
    div.innerHTML = `
      <iframe class="video-frame" src="${beat.embed}" allow="accelerometer; autoplay; encrypted-media; picture-in-picture" allowfullscreen></iframe>
      <div class="feedback">
        <button onclick="saveBeat('like', ${idx})">❤️</button>
        <button onclick="saveBeat('hold', ${idx})">🕓</button>
        <button onclick="removeBeat(${idx})">💔</button>
      </div>
    `;
    results.appendChild(div);
  });

  window.currentBeats = fakeResults;
}

function saveBeat(type, idx){
  const beat = window.currentBeats[idx];
  if(!savedBeats[type].some(b => b.embed === beat.embed)){
    savedBeats[type].push(beat);
  }
  alert(`${type === 'like' ? '좋음' : '보류'}으로 저장됨!`);
}

function showSaved(type){
  const section = document.getElementById('savedSection');
  const list = document.getElementById('savedList');
  const title = document.getElementById('savedTitle');
  title.innerText = type === 'like' ? '좋아요한 비트' : '보류한 비트';

  list.innerHTML = '';
  savedBeats[type].forEach(b => {
    const el = document.createElement('div');
    el.className = 'saved-video';
    el.innerHTML = `<iframe class='video-frame' src='${b.embed}' allowfullscreen></iframe>`;
    list.appendChild(el);
  });

  section.style.display = 'flex';
}

function closeSaved(){
  document.getElementById('savedSection').style.display = 'none';
}
</script>
</body>
</html>
